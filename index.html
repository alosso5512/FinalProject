<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Bookbag</title>
  <style>
    body { font-family: 'Comfortaa', sans-serif; background: #f5f0ff; margin: 0; padding: 20px; }
    h1 { color: #4a2c84; }
    .section { margin-bottom: 2rem; }
    .book { background: #fff; padding: 1rem; border: 1px solid #ccc; margin: 0.5rem 0; border-radius: 8px; }
    form { display: inline-block; margin-top: 0.5rem; }
    select, input[type="checkbox"], button { margin: 0.25rem; }
  </style>
</head>
<body>
  <h1>The Bookbag 📚</h1>

  <!-- Add New Book -->
  <form action="/add" method="POST">
    <input type="text" name="title" placeholder="Title" required>
    <input type="text" name="author" placeholder="Author" required>
    <select name="status">
      <option value="Currently Reading">Currently Reading</option>
      <option value="Finished">Finished</option>
      <option value="DNF">DNF</option>
    </select>
    <input type="number" name="rating" placeholder="Rating (1-5)">
    <label><input type="checkbox" name="favorite"> Favorite</label>
    <button type="submit">Add Book</button>
  </form>

  <!-- Favorite Books -->
  {% if favorites %}
  <div class="section">
    <h2>🌟 Favorites</h2>
    {% for book in favorites %}
    <div class="book">
      <strong>{{ book.title }}</strong> by {{ book.author }} ({{ book.status }}) — ⭐ {{ book.rating or "N/A" }}
      <form action="/update/{{ book.id }}" method="POST">
        <select name="status">
          <option {% if book.status == 'Currently Reading' %}selected{% endif %}>Currently Reading</option>
          <option {% if book.status == 'Finished' %}selected{% endif %}>Finished</option>
          <option {% if book.status == 'DNF' %}selected{% endif %}>DNF</option>
        </select>
        <input type="number" name="rating" placeholder="Rating (1-5)" value="{{ book.rating or '' }}">
        <label><input type="checkbox" name="favorite" {% if book.favorite %}checked{% endif %}> Favorite</label>
        <button type="submit">Update</button>
      </form>
      <form action="/delete/{{ book.id }}" method="POST" style="display:inline;">
        <button type="submit">Delete</button>
      </form>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <!-- Other Categories -->
  {% for label, book_list in [('📖 Currently Reading', currently_reading), ('✅ Finished', finished), ('🚫 DNF', dnf)] %}
    {% if book_list %}
    <div class="section">
      <h2>{{ label }}</h2>
      {% for book in book_list %}
      <div class="book">
        <strong>{{ book.title }}</strong> by {{ book.author }} — ⭐ {{ book.rating or "N/A" }}
        <form action="/update/{{ book.id }}" method="POST">
          <select name="status">
            <option {% if book.status == 'Currently Reading' %}selected{% endif %}>Currently Reading</option>
            <option {% if book.status == 'Finished' %}selected{% endif %}>Finished</option>
            <option {% if book.status == 'DNF' %}selected{% endif %}>DNF</option>
          </select>
          <input type="number" name="rating" placeholder="Rating (1-5)" value="{{ book.rating or '' }}">
          <label><input type="checkbox" name="favorite" {% if book.favorite %}checked{% endif %}> Favorite</label>
          <button type="submit">Update</button>
        </form>
        <form action="/delete/{{ book.id }}" method="POST" style="display:inline;">
          <button type="submit">Delete</button>
        </form>
      </div>
      {% endfor %}
    </div>
    {% endif %}
  {% endfor %}
</body>
</html>


